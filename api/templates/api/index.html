{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="refresh" content="1800" >

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="{% static 'bootstrap-4.4.1/css/bootstrap.css' %}" />
    <link rel="stylesheet" href="{% static 'datepicker/css/datepicker.css' %}" />
    <link rel="stylesheet" href="{% static 'fontawesome-free-5.12.0-web/css/all.css' %}" />
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />

    <title>Twende Weather App</title>
    </head>
    <body class="full-background padd">
        <div class="row">
            <div class="col-sm-12 center text-light">
                <h6><a href="https://darksky.net/poweredby/" class="text-light">Powered By Dark Sky</a></h6>
            </div>
            <div class="col-md-4 left">
                <div class="content-container-left">
                    <canvas id="icon1" width="100" height="100"></canvas>
                    <div style="padding-left: 1em;">
                        <h1 class="big text-light">{{data.summary}}</h1>
                        <h1 class="biggest text-light">{{data.temperature}}&#8451;</h1>
                    </div>
                </div>                                
            </div>
            <div class="col-md-4 center">
                <div class="content-container-center">
                    <div style="height: 8em;">&nbsp;</div>
                    <h1 class="biggest text-light">Nairobi <i class="fas fa-map-marker-alt"></i></h1>
                    <h1 class="bigger text-light">{{data.time}}</h1>
                </div>
            </div>
            <div class="col-md-4 right">
                <div class="content-container-right">
                    <div class="row data">
                        <div class="col-md-9 right">
                            <h4><i class="fas fa-water text-light"></i></h1>
                        </div>
                        <div class="col-md-3 left">
                            <h1 class="smallest text-light">Humidity</h5>
                            <h1 class="big boldest text-light">{{data.humidity}}mm</h1>
                        </div>
                    </div>
                    <div class="row data">
                        <div class="col-md-9 right">
                            <h4><i class="fas fa-smog text-light"></i></h1>
                        </div>
                        <div class="col-md-3 left">
                            <h1 class="smallest text-light">Air Pressure</h5>
                            <h1 class="big boldest text-light">{{data.pressure}}hp</h1>
                        </div>
                    </div>
                    <div class="row data">
                        <div class="col-md-9 right">
                            <h4><i class="fas fa-cloud-rain text-light"></i></h1>
                        </div>
                        <div class="col-md-3 left">
                            <h1 class="smallest text-light">Precipitation</h5>
                            <h1 class="big boldest text-light">{{data.precipitation}}mm/h</h1>
                        </div>
                    </div>
                    <div class="row data">
                        <div class="col-md-9 right">
                            <h4><i class="fas fa-wind text-light"></i></h1>
                        </div>
                        <div class="col-md-3 left">
                            <h1 class="smallest text-light">Wind Speed</h5>
                            <h1 class="big boldest text-light">{{data.wind_speed}}m/s</h1>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row text-light" style="margin-top: 5em">
            <div class="col-md-12">Select Date To View Weather</div>
            <div class="col-md-3">
                <form method='get'>
                    <!-- {% csrf_token %} -->
                    <input type="text" id="date-data" class="datepicker-here" data-language='en' data-position="right top"><br>
                    <button id="submit-data" class="btn btn-primary">Load</button>
                </form>
            </div>
            <div class="col-md-9">
                <div class="row">
                    <div class="col-md-3">
                        <div class="row">
                            <div class="content-container-left">
                                <canvas id="icon2" width="70" height="70"></canvas>
                                <div style="padding-left: 1em;">
                                    <h1 class="big text-light" id="summary">{{data.summary}}</h1>
                                    <h1 class="big text-light" id="temp">{{data.temperature}}&#8451;</h1>
                                </div>
                            </div>  
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="row">
                            <div class="col-md-12 center">
                                <h3><i class="fas fa-water text-light"></i></h3>
                                <h1 class="smallest text-light">Humidity</h5>
                                <h1 class="big bold text-light" id="humidity">{{data.humidity}}hp</h1>
                            </div>
                        </div>                        
                    </div>
                    <div class="col-md-2">
                        <div class="row">
                            <div class="col-md-12 center">
                                <h3><i class="fas fa-smog text-light"></i></h3>
                                <h1 class="smallest text-light">Air Pressure</h5>
                                <h1 class="big bold text-light" id="pressure">{{data.pressure}}hp</h1>
                            </div>
                        </div>                        
                    </div>
                    <div class="col-md-2">
                        <div class="row">
                            <div class="col-md-12 center">
                                <h3><i class="fas fa-cloud-rain text-light"></i></h3>
                                <h1 class="smallest text-light">Precipitation</h5>
                                <h1 class="big bold text-light" id="precip">{{data.precipitation}}hp</h1>
                            </div>
                        </div>                        
                    </div>
                    <div class="col-md-2">
                        <div class="row">
                            <div class="col-md-12 center">
                                <h3><i class="fas fa-wind text-light"></i></h3>
                                <h1 class="smallest text-light">Wind Speed</h5>
                                <h1 class="big bold text-light" id="wind">{{data.wind_speed}}hp</h1>
                            </div>
                        </div>                        
                    </div>
                </div>

            </div>
        </div>
        

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="{% static 'jquery/jquery-3.4.1.js' %}"></script>
    <script src="{% static 'popperjs/popper-1.16.0.min.js' %}"></script>
    <script src="{% static 'datepicker/js/datepicker.js' %}"></script>
    <script src="{% static 'datepicker/js/i18n/datepicker.en.js' %}"></script>
    <script src="{% static 'bootstrap-4.4.1/js/bootstrap.js' %}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/skycons/1396634940/skycons.min.js"></script>
    <script>
        var skycons = new Skycons({"color": "white", "border": "2px solid white"});
        // on Android, a nasty hack is needed: {"resizeClear": true}
        
        // you can add a canvas by it's ID...
        skycons.add("icon1", "{{data.icon}}");
        skycons.add("icon2", "{{data.icon}}");
        
        
        // if you're using the Forecast API, you can also supply
        // strings: "partly-cloudy-day" or "rain".
        
        // start animation!
        skycons.play();
    </script>
    
    <script>
    $("#submit-data").click(function () {
      var date = $('#date-data').val();
      var csrftoken = jQuery("[name=csrfmiddlewaretoken]").val();

      $.ajax({
        url: '/ajax/day-data/',
        data: {
          'day': date
        },
        dataType: 'json',
        success: function (data) {
            $('#summary').val(data.summary)
            $('#temp').val(data.temperature)
            $('#humidity').val(data.humidity)
            $('#precip').val(data.precipitation)
            $('#wind-speed').val(data.wind_speed)
        }
        fail: function(){
            alert('fail');
        }
      });

    });
    </script>
    <script>
        $().datepicker('autoHide': true,)
    </script>
</body>
</html>